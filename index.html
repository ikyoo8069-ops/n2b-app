<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N2B - ì •ë¶€ R&D ì •ì±…ìê¸ˆ ë§¤ì¹­</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 0;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        /* í—¤ë” */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.95;
        }
        
        /* ì„¤ì • ì„¹ì…˜ */
        .setup-section {
            padding: 30px;
            background: #f8f9ff;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .setup-section h3 {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .config-row {
            margin-bottom: 15px;
        }
        
        .config-row label {
            display: block;
            margin-bottom: 5px;
            color: #666;
            font-size: 0.9em;
        }
        
        .config-row input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
        }
        
        .config-row input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .save-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .save-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
        
        .status {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.9em;
        }
        
        /* ë‚´ìš© ì„¹ì…˜ */
        .content {
            padding: 30px;
        }
        
        .section {
            margin-bottom: 30px;
        }
        
        .section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        /* íƒ­ */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .tab {
            padding: 12px 24px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 1em;
            color: #666;
            transition: all 0.3s;
        }
        
        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* ìƒ˜í”Œ ê·¸ë¦¬ë“œ */
        .sample-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .sample-card {
            background: linear-gradient(135deg, #f8f9ff 0%, #e8ebff 100%);
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        
        .sample-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
            border-color: #667eea;
        }
        
        .sample-card.selected {
            border-color: #667eea;
            border-width: 3px;
            background: linear-gradient(135deg, #e8ebff 0%, #d4d9ff 100%);
        }
        
        .sample-card.selected::after {
            content: 'âœ“';
            position: absolute;
            top: 10px;
            right: 10px;
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .sample-number {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #667eea;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .sample-card.selected .sample-number {
            display: none;
        }
        
        .sample-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            padding-right: 35px;
        }
        
        .sample-tags {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }
        
        .sample-tag {
            background: #667eea;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75em;
        }
        
        .sample-desc {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .sample-budget {
            color: #667eea;
            font-weight: 600;
            font-size: 0.95em;
        }
        
        /* íŒŒì¼ ì—…ë¡œë“œ */
        .file-upload {
            border: 2px dashed #667eea;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .file-upload:hover {
            background: #f8f9ff;
            border-color: #5568d3;
        }
        
        .file-upload input {
            display: none;
        }
        
        /* í¼ ì…ë ¥ */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            font-family: inherit;
        }
        
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        /* ë¶„ì„ ë²„íŠ¼ */
        .analyze-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 30px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .analyze-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }
        
        .analyze-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            box-shadow: none;
        }
        
        /* ë¡œë”© */
        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }
        
        .loading.active {
            display: block;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ê²°ê³¼ */
        .results {
            display: none;
            margin-top: 30px;
        }
        
        .results.active {
            display: block;
        }
        
        .result-card {
            background: #f8f9ff;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .result-card h4 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .result-text {
            color: #333;
            line-height: 1.8;
            white-space: pre-wrap;
        }
        
        .program-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
        }
        
        .program-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }
        
        .program-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #333;
            flex: 1;
        }
        
        .match-score {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 1.1em;
        }
        
        .program-meta {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        
        .meta-tag {
            background: #e8ebff;
            color: #667eea;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
        }
        
        .program-reason {
            color: #666;
            line-height: 1.8;
            padding: 15px;
            background: #f8f9ff;
            border-radius: 8px;
        }
        
        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .sample-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            <h1>ğŸ¯ N2B</h1>
            <p class="subtitle">ì •ë¶€ R&D ì •ì±…ìê¸ˆ ë§¤ì¹­ ì‹œìŠ¤í…œ</p>
        </div>
        
        <!-- ì„¤ì • ì„¹ì…˜ -->
        <div class="setup-section">
            <h3>âš™ï¸ ì„¤ì •</h3>
            
            <div class="config-row">
                <label>Google Apps Script ë°±ì—”ë“œ URL</label>
                <input 
                    type="text" 
                    id="backendUrl" 
                    placeholder="https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec"
                >
            </div>
            
            <div class="config-row">
                <label>Anthropic API í‚¤</label>
                <input 
                    type="password" 
                    id="apiKeyInput" 
                    placeholder="sk-ant-api03-..."
                >
            </div>
            
            <button class="save-btn" onclick="saveConfig()">ğŸ’¾ ì„¤ì • ì €ì¥</button>
            <div id="configStatus" class="status"></div>
        </div>
        
        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <div class="content">
            <!-- ì…ë ¥ ì„¹ì…˜ -->
            <div class="section">
                <h3>ğŸ“ ì‚¬ì—…ê³„íšì„œ ì…ë ¥</h3>
                
                <div class="tabs">
                    <button class="tab active" data-tab="sample" onclick="switchTab('sample')">ğŸ¯ ìƒ˜í”Œ ì„ íƒ</button>
                    <button class="tab" data-tab="upload" onclick="switchTab('upload')">ğŸ“„ íŒŒì¼ ì—…ë¡œë“œ</button>
                    <button class="tab" data-tab="form" onclick="switchTab('form')">âœï¸ ì§ì ‘ ì…ë ¥</button>
                </div>
                
                <!-- ìƒ˜í”Œ ì„ íƒ íƒ­ -->
                <div id="sample-tab" class="tab-content active">
                    <div class="sample-grid">
                        <div class="sample-card" data-sample="1" onclick="selectSample(1)">
                            <div class="sample-number">1</div>
                            <div class="sample-title">AI ê±´ì„¤ ì•ˆì „ê´€ë¦¬</div>
                            <div class="sample-tags">
                                <span class="sample-tag">ê±´ì„¤</span>
                                <span class="sample-tag">AI</span>
                            </div>
                            <div class="sample-desc">ì‹¤ì‹œê°„ ìœ„í—˜ ê°ì§€ ë° ì˜ˆë°©ì  ì•ˆì „ê´€ë¦¬</div>
                            <div class="sample-budget">ğŸ’° 15ì–µì›</div>
                        </div>
                        
                        <div class="sample-card" data-sample="2" onclick="selectSample(2)">
                            <div class="sample-number">2</div>
                            <div class="sample-title">ìŠ¤ë§ˆíŠ¸íŒœ ë³‘í•´ì¶© ì˜ˆì¸¡</div>
                            <div class="sample-tags">
                                <span class="sample-tag">ë†ì—…</span>
                                <span class="sample-tag">IoT</span>
                            </div>
                            <div class="sample-desc">AI ì˜ìƒ ì§„ë‹¨ìœ¼ë¡œ ë†ì•½ ì‚¬ìš© 60% ê°ì†Œ</div>
                            <div class="sample-budget">ğŸ’° 12ì–µì›</div>
                        </div>
                        
                        <div class="sample-card" data-sample="3" onclick="selectSample(3)">
                            <div class="sample-number">3</div>
                            <div class="sample-title">íí”Œë¼ìŠ¤í‹± ì¬í™œìš©</div>
                            <div class="sample-tags">
                                <span class="sample-tag">í™˜ê²½</span>
                                <span class="sample-tag">ESG</span>
                            </div>
                            <div class="sample-desc">99% ì •í™•ë„ AI ë¶„ë¥˜ë¡œ Virginê¸‰ ì¬ìƒì›ë£Œ</div>
                            <div class="sample-budget">ğŸ’° 20ì–µì›</div>
                        </div>
                        
                        <div class="sample-card" data-sample="4" onclick="selectSample(4)">
                            <div class="sample-number">4</div>
                            <div class="sample-title">í—¬ìŠ¤ì¼€ì–´ ì›¨ì–´ëŸ¬ë¸”</div>
                            <div class="sample-tags">
                                <span class="sample-tag">ì˜ë£Œ</span>
                                <span class="sample-tag">AI</span>
                            </div>
                            <div class="sample-desc">AI ì‹¬ì „ë„ ë¶„ì„ìœ¼ë¡œ ëŒì—°ì‚¬ ì˜ˆë°©</div>
                            <div class="sample-budget">ğŸ’° 18ì–µì›</div>
                        </div>
                        
                        <div class="sample-card" data-sample="5" onclick="selectSample(5)">
                            <div class="sample-number">5</div>
                            <div class="sample-title">ìŠ¤ë§ˆíŠ¸íŒ©í† ë¦¬ ì†”ë£¨ì…˜</div>
                            <div class="sample-tags">
                                <span class="sample-tag">ì œì¡°</span>
                                <span class="sample-tag">ë””ì§€í„¸</span>
                            </div>
                            <div class="sample-desc">ì¤‘ì†Œê¸°ì—… ë§ì¶¤í˜• ì €ë¹„ìš© ìŠ¤ë§ˆíŠ¸íŒ©í† ë¦¬</div>
                            <div class="sample-budget">ğŸ’° 15ì–µì›</div>
                        </div>
                    </div>
                </div>
                
                <!-- íŒŒì¼ ì—…ë¡œë“œ íƒ­ -->
                <div id="upload-tab" class="tab-content">
                    <div class="file-upload" onclick="document.getElementById('fileInput').click()">
                        <input type="file" id="fileInput" accept=".txt,.docx,.pdf" onchange="handleFileUpload(event)">
                        <p style="font-size: 3em; margin-bottom: 10px;">ğŸ“„</p>
                        <p style="color: #667eea; font-weight: 600; margin-bottom: 5px;">íŒŒì¼ ì„ íƒ ë˜ëŠ” ë“œë˜ê·¸ ì•¤ ë“œë¡­</p>
                        <p style="color: #999; font-size: 0.9em;">ì§€ì› í˜•ì‹: TXT, DOCX, PDF</p>
                    </div>
                    <div id="fileName" style="margin-top: 15px; color: #667eea; font-weight: 600;"></div>
                </div>
                
                <!-- ì§ì ‘ ì…ë ¥ íƒ­ -->
                <div id="form-tab" class="tab-content">
                    <div class="form-group">
                        <label>ì‚¬ì—…ëª…</label>
                        <input type="text" id="projectName" placeholder="ì˜ˆ: AI ê¸°ë°˜ ê±´ì„¤í˜„ì¥ ì•ˆì „ê´€ë¦¬ ì‹œìŠ¤í…œ">
                    </div>
                    
                    <div class="form-group">
                        <label>N (NOT) - í˜„ì¬ì˜ ë¬¸ì œì </label>
                        <textarea id="problemN" placeholder="í•´ê²°í•˜ê³ ì í•˜ëŠ” ë¬¸ì œ, í˜„ì¬ì˜ í•œê³„ì ì„ ê¸°ìˆ í•˜ì„¸ìš”"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>B (BUT) - ì œì•ˆí•˜ëŠ” ì†”ë£¨ì…˜</label>
                        <textarea id="solutionB" placeholder="ì–´ë–¤ í˜ì‹ ì ì¸ í•´ê²°ì±…ì„ ì œì•ˆí•˜ëŠ”ì§€ ê¸°ìˆ í•˜ì„¸ìš”"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>C (BECAUSE) - ê·¼ê±° ë° ê¸°ëŒ€íš¨ê³¼</label>
                        <textarea id="evidenceC" placeholder="ì™œ ì´ ì†”ë£¨ì…˜ì´ íš¨ê³¼ì ì¸ì§€, ì–´ë–¤ ì„±ê³¼ë¥¼ ê¸°ëŒ€í•˜ëŠ”ì§€ ê¸°ìˆ í•˜ì„¸ìš”"></textarea>
                    </div>
                </div>
            </div>
            
            <!-- ë¶„ì„ ë²„íŠ¼ -->
            <button id="analyzeBtn" class="analyze-btn" disabled onclick="startAnalysis()">
                ğŸš€ N2B ë¶„ì„ ë° ì •ì±… ë§¤ì¹­ ì‹œì‘
            </button>
            
            <!-- ë¡œë”© -->
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>AIê°€ ì‚¬ì—…ê³„íšì„œë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
            </div>
            
            <!-- ê²°ê³¼ -->
            <div id="results" class="results">
                <h3 style="color: #667eea; margin-bottom: 20px;">ğŸ“Š ë¶„ì„ ê²°ê³¼</h3>
                
                <div class="result-card">
                    <h4>N (NOT) - í˜„ì¬ì˜ ë¬¸ì œì </h4>
                    <div id="resultN" class="result-text"></div>
                </div>
                
                <div class="result-card">
                    <h4>B (BUT) - ì œì•ˆ ì†”ë£¨ì…˜</h4>
                    <div id="resultB" class="result-text"></div>
                </div>
                
                <div class="result-card">
                    <h4>C (BECAUSE) - ê·¼ê±° ë° ê¸°ëŒ€íš¨ê³¼</h4>
                    <div id="resultC" class="result-text"></div>
                </div>
                
                <h3 style="color: #667eea; margin: 30px 0 20px;">ğŸ¯ ì¶”ì²œ ì •ë¶€ì§€ì›ì‚¬ì—… Top 3</h3>
                <div id="programResults"></div>
            </div>
        </div>
    </div>

    <script>
        let backendUrl = null;
        let apiKey = null;
        let inputMode = 'sample';
        let selectedSample = null;
        let uploadedFile = null;

        // ìƒ˜í”Œ ë°ì´í„°
        const sampleProposals = {
            1: `ì‚¬ì—…ëª…: AI ê¸°ë°˜ ì‹¤ì‹œê°„ ê±´ì„¤í˜„ì¥ ì•ˆì „ê´€ë¦¬ ì‹œìŠ¤í…œ

1. í˜„ì¬ ë¬¸ì œì  (N - NOT)
êµ­ë‚´ ê±´ì„¤í˜„ì¥ì˜ ì‚¬ë§ì‚¬ê³ ìœ¨ì€ OECD í‰ê· ì˜ 2.5ë°°ì— ë‹¬í•˜ë©°, ì—°ê°„ 400ëª… ì´ìƒì˜ ì‚¬ë§ìê°€ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤. í˜„ì¬ì˜ ì•ˆì „ê´€ë¦¬ëŠ” ì£¼ë¡œ ì‘ì—…ìì˜ ê²½í—˜ê³¼ ì£¼ê´€ì  íŒë‹¨ì— ì˜ì¡´í•˜ê³  ìˆìœ¼ë©°, ìœ„í—˜ ìƒí™©ì˜ ì‹¤ì‹œê°„ ê°ì§€ê°€ ë¶ˆê°€ëŠ¥í•˜ê³  ì‚¬í›„ ëŒ€ì‘ ì¤‘ì‹¬ì´ë©° ì•ˆì „ê´€ë¦¬ ì¸ë ¥ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.

2. ì œì•ˆ ì†”ë£¨ì…˜ (B - BUT)
AI ì»´í“¨í„° ë¹„ì „ê³¼ IoT ì„¼ì„œë¥¼ ê²°í•©í•œ ì‹¤ì‹œê°„ ì•ˆì „ê´€ë¦¬ ì‹œìŠ¤í…œìœ¼ë¡œ, CCTV ì‹¤ì‹œê°„ ë¶„ì„ìœ¼ë¡œ ìœ„í—˜ ìë™ ê°ì§€, IoT ì„¼ì„œë¡œ ì‘ì—…ì ìœ„ì¹˜ ì¶”ì  ë° ìœ í•´ê°€ìŠ¤ ê°ì§€, ì‹¤ì‹œê°„ ê²½ë³´ ì‹œìŠ¤í…œ, ë¹…ë°ì´í„° ê¸°ë°˜ ì˜ˆì¸¡ì  ì•ˆì „ê´€ë¦¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

3. ê·¼ê±° ë° ê¸°ëŒ€íš¨ê³¼ (C - BECAUSE)
ìì²´ AI ëª¨ë¸ì€ ê±´ì„¤í˜„ì¥ ìœ„í—˜ ìƒí™© ì¸ì‹ë¥  94% ë‹¬ì„±í–ˆìœ¼ë©°, ì„œìš¸ëŒ€ ê±´ì„¤í™˜ê²½ê³µí•™ë¶€ì™€ 3ë…„ê°„ 50ê°œ í˜„ì¥ ë°ì´í„° í™•ë³´í–ˆìŠµë‹ˆë‹¤. íŠ¹í—ˆ 2ê±´ ì¶œì› ì™„ë£Œ, íŒŒì¼ëŸ¿ í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ê³ ìœ¨ 65% ê°ì†Œ í™•ì¸, ì—°ê°„ 2,000ì–µì› ì•ˆì „ì‚¬ê³  ë¹„ìš© ì ˆê° ê°€ëŠ¥í•©ë‹ˆë‹¤.

ì´ ì†Œìš” ì˜ˆì‚°: 15ì–µì›`,

            2: `ì‚¬ì—…ëª…: ìŠ¤ë§ˆíŠ¸íŒœ ì¹œí™˜ê²½ ë³‘í•´ì¶© ì˜ˆì¸¡ ë° ë°©ì œ ì‹œìŠ¤í…œ

1. í˜„ì¬ ë¬¸ì œì  (N - NOT)
êµ­ë‚´ ë†ê°€ì˜ ë†ì•½ ì‚¬ìš©ëŸ‰ì€ haë‹¹ 12.1kgìœ¼ë¡œ OECD êµ­ê°€ ì¤‘ 1ìœ„ì´ë©°, ê³¼ë‹¤í•œ ì˜ˆë°©ì  ë†ì•½ ì‚´í¬, ê²½í—˜ ì˜ì¡´ì  íŒë‹¨ìœ¼ë¡œ ì´ˆê¸° ë°œê²¬ ì–´ë ¤ì›€, ë¶€ì ì ˆí•œ ë°©ì œ ì‹œê¸°ë¡œ íš¨ê³¼ ì €í•˜, ë†ì•½ë¹„ê°€ ìƒì‚°ë¹„ì˜ 15-20% ì°¨ì§€í•©ë‹ˆë‹¤.

2. ì œì•ˆ ì†”ë£¨ì…˜ (B - BUT)
AI ì˜ìƒ ì§„ë‹¨(92% ì •í™•ë„)ê³¼ IoT ì„¼ì„œ ë°ì´í„°ë¡œ 7ì¼ ì „ ë³‘í•´ì¶© ë°œìƒ ì˜ˆì¸¡, ìµœì  ë°©ì œ íƒ€ì´ë° ìë™ ì•Œë¦¼, ì¹œí™˜ê²½ ë°©ì œë²• ìš°ì„  ì¶”ì²œ, ìŠ¤ë§ˆíŠ¸í° ì•±ìœ¼ë¡œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ì„ ì œê³µí•©ë‹ˆë‹¤.

3. ê·¼ê±° ë° ê¸°ëŒ€íš¨ê³¼ (C - BECAUSE)
ë†ì´Œì§„í¥ì²­ ê³µë™ì—°êµ¬ë¡œ 3ë…„ê°„ ë”¸ê¸°Â·í† ë§ˆí†  ì£¼ìš” ë³‘í•´ì¶© 20ì¢… í•™ìŠµ ë°ì´í„° í™•ë³´, íŒŒì¼ëŸ¿ ë†ê°€ 10ê³³ì—ì„œ ë†ì•½ ì‚¬ìš©ëŸ‰ 60% ê°ì†Œ í™•ì¸, ìƒì‚°ëŸ‰ 15% ì¦ê°€, ë†ê°€ë‹¹ ì—°ê°„ 1,500ë§Œì› ë¹„ìš© ì ˆê° ê°€ëŠ¥í•©ë‹ˆë‹¤.

ì´ ì†Œìš” ì˜ˆì‚°: 12ì–µì›`,

            3: `ì‚¬ì—…ëª…: AI ê¸°ë°˜ íí”Œë¼ìŠ¤í‹± ìë™ ë¶„ë¥˜ ë° ê³ ë¶€ê°€ ì¬í™œìš© ì‹œìŠ¤í…œ

1. í˜„ì¬ ë¬¸ì œì  (N - NOT)
êµ­ë‚´ ì—°ê°„ íí”Œë¼ìŠ¤í‹± 1,000ë§Œí†¤ ì¤‘ ì‹¤ì œ ì¬í™œìš©ë¥ ì€ 27%ì— ë¶ˆê³¼í•˜ë©°, ìˆ˜ì‘ì—… ë¶„ë¥˜ì˜ ì •í™•ë„ 60%, ë³µí•©ì¬ì§ˆ ì²˜ë¦¬ ë¶ˆê°€, ë¶ˆìˆœë¬¼ í˜¼ì…ìœ¼ë¡œ ì €í’ˆì§ˆ ì¬ìƒì›ë£Œ ìƒì‚°, ì—´ì•…í•œ ì‘ì—…í™˜ê²½ìœ¼ë¡œ ì¸ë ¥ë‚œì´ ì‹¬ê°í•©ë‹ˆë‹¤.

2. ì œì•ˆ ì†”ë£¨ì…˜ (B - BUT)
í•˜ì´í¼ìŠ¤í™íŠ¸ëŸ¼ AI ë¹„ì „ìœ¼ë¡œ 7ì¢… í”Œë¼ìŠ¤í‹± 99% ì •í™•ë„ ìë™ ì¸ì‹, Delta ë¡œë´‡ì´ ë¶„ë‹¹ 120ê°œ ì²˜ë¦¬(ê¸°ì¡´ ìœ¡ì•ˆ ëŒ€ë¹„ 10ë°°), ë ˆì´ì € ë¼ë²¨ ì œê±° ë° AI ê¸°ë°˜ ì„¸ì²™ìœ¼ë¡œ ë¬¼ ì‚¬ìš©ëŸ‰ 50% ì ˆê°, ë¶ˆìˆœë¬¼ 0.1% ì´í•˜ë¡œ Virginê¸‰ í’ˆì§ˆ ìƒì‚°í•©ë‹ˆë‹¤.

3. ê·¼ê±° ë° ê¸°ëŒ€íš¨ê³¼ (C - BECAUSE)
ì¸ì²œ ì¬í™œìš©ì„¼í„° 6ê°œì›” íŒŒì¼ëŸ¿ì—ì„œ ë¶„ë¥˜ ì •í™•ë„ 99.2%, ì‹œê°„ë‹¹ 5í†¤ ì²˜ë¦¬, ì¬ìƒì›ë£Œ ìˆœë„ 99.8% ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤. KAIST ê¸°ê³„ê³µí•™ê³¼ í˜‘ë ¥, ê³ í’ˆì§ˆ ì¬ìƒ PETëŠ” í†¤ë‹¹ 150ë§Œì›(ì¼ë°˜ 50ë§Œì› ëŒ€ë¹„ 3ë°°), ì—° 10,000í†¤ ì²˜ë¦¬ ì‹œ 150ì–µì› ë§¤ì¶œ, Virgin ëŒ€ë¹„ í†¤ë‹¹ CO2 3í†¤ ê°ì†Œ íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤.

ì´ ì†Œìš” ì˜ˆì‚°: 20ì–µì›`,

            4: `ì‚¬ì—…ëª…: AI ì‹¬ì „ë„ ë¶„ì„ ê¸°ë°˜ ëŒì—°ì‚¬ ì˜ˆë°© ì›¨ì–´ëŸ¬ë¸” ë””ë°”ì´ìŠ¤

1. í˜„ì¬ ë¬¸ì œì  (N - NOT)
êµ­ë‚´ ì—°ê°„ ì‹¬ì¥ ëŒì—°ì‚¬ 3ë§Œëª…, ì´ì¤‘ 70%ëŠ” ì „ì¡°ì¦ìƒ ì—†ì´ ë°œìƒí•˜ë©°, ê¸°ì¡´ ì›¨ì–´ëŸ¬ë¸”ì€ ë‹¨ìˆœ ì‹¬ë°•ìˆ˜ ì¸¡ì •ë§Œ ê°€ëŠ¥, ì˜ë£Œê¸°ê´€ ì‹¬ì „ë„ ê²€ì‚¬ëŠ” ì§§ì€ ì¸¡ì • ì‹œê°„(10ì´ˆ)ìœ¼ë¡œ ê°„í—ì  ë¶€ì •ë§¥ í¬ì°© ë¶ˆê°€, ê³ ë ¹ì¸µÂ·ë§Œì„±ì§ˆí™˜ì ì¼ìƒ ëª¨ë‹ˆí„°ë§ ë¯¸í¡í•©ë‹ˆë‹¤.

2. ì œì•ˆ ì†”ë£¨ì…˜ (B - BUT)
íŒ¨ì¹˜í˜• ì„¼ì„œë¡œ 14ì¼ ì—°ì† ì‹¬ì „ë„ ì¸¡ì •, AI ì•Œê³ ë¦¬ì¦˜ì´ 17ì¢… ë¶€ì •ë§¥ 97% ì •í™•ë„ë¡œ ì‹¤ì‹œê°„ ê°ì§€, ìœ„í—˜ ì‹œ í™˜ìÂ·ë³´í˜¸ìÂ·ì˜ë£Œì§„ì— ì¦‰ì‹œ ì•Œë¦¼, í´ë¼ìš°ë“œ ê¸°ë°˜ ì¥ê¸° ë°ì´í„° ë¶„ì„ìœ¼ë¡œ ëŒì—°ì‚¬ ìœ„í—˜ 7ì¼ ì „ ì˜ˆì¸¡í•©ë‹ˆë‹¤.

3. ê·¼ê±° ë° ê¸°ëŒ€íš¨ê³¼ (C - BECAUSE)
ì„œìš¸ëŒ€ë³‘ì› ìˆœí™˜ê¸°ë‚´ê³¼ì™€ 2ë…„ê°„ 5,000ëª… ì‹¬ì „ë„ ë°ì´í„° í™•ë³´, ì˜ë£Œê¸°ê¸° 2ë“±ê¸‰ ì¸í—ˆê°€ ì§„í–‰ ì¤‘, íŒŒì¼ëŸ¿ ë³‘ì› 3ê³³ì—ì„œ ë¶€ì •ë§¥ ì¡°ê¸° ë°œê²¬ìœ¨ 85% í–¥ìƒ í™•ì¸, ëŒì—°ì‚¬ 30% ê°ì†Œ ëª©í‘œ, ì—° 3,000ì–µì› ì˜ë£Œë¹„ ì ˆê° ê°€ëŠ¥í•©ë‹ˆë‹¤.

ì´ ì†Œìš” ì˜ˆì‚°: 18ì–µì›`,

            5: `ì‚¬ì—…ëª…: ì¤‘ì†Œ ì œì¡°ê¸°ì—… ë§ì¶¤í˜• ì €ë¹„ìš© ìŠ¤ë§ˆíŠ¸íŒ©í† ë¦¬ ì†”ë£¨ì…˜

1. í˜„ì¬ ë¬¸ì œì  (N - NOT)
ì¤‘ì†Œ ì œì¡°ê¸°ì—…ì˜ ìŠ¤ë§ˆíŠ¸íŒ©í† ë¦¬ ë„ì…ë¥ ì€ 15%ì— ë¶ˆê³¼í•˜ë©°, í‰ê·  êµ¬ì¶•ë¹„ìš© 3ì–µì›ìœ¼ë¡œ ë¶€ë‹´, ë³µì¡í•œ ì‹œìŠ¤í…œìœ¼ë¡œ ìš´ì˜ ì¸ë ¥ ë¶€ì¡±, ë ˆê±°ì‹œ ì„¤ë¹„ì™€ í˜¸í™˜ì„± ë¬¸ì œ, ROI ë¶ˆí™•ì‹¤ì„±ìœ¼ë¡œ íˆ¬ì ì£¼ì €í•©ë‹ˆë‹¤.

2. ì œì•ˆ ì†”ë£¨ì…˜ (B - BUT)
ë…¸ì½”ë“œ ê¸°ë°˜ ì¡°ë¦½í˜• ëª¨ë“ˆë¡œ ë¹„ì „ë¬¸ê°€ë„ 1ì£¼ì¼ ë‚´ êµ¬ì¶•, ì›” 30ë§Œì› êµ¬ë…í˜• ëª¨ë¸ë¡œ ì´ˆê¸° íˆ¬ì ë¶€ë‹´ ì œë¡œ, ê¸°ì¡´ ì„¤ë¹„ 80% í™œìš© ê°€ëŠ¥í•œ IoT ì„¼ì„œ í‚¤íŠ¸, ì‹¤ì‹œê°„ ìƒì‚° ëª¨ë‹ˆí„°ë§ ë° AI ê¸°ë°˜ ë¶ˆëŸ‰ ì˜ˆì¸¡ì„ ì œê³µí•©ë‹ˆë‹¤.

3. ê·¼ê±° ë° ê¸°ëŒ€íš¨ê³¼ (C - BECAUSE)
ê²½ê¸°ë„ ì¤‘ì†Œê¸°ì—… 20ê³³ íŒŒì¼ëŸ¿ì—ì„œ í‰ê·  êµ¬ì¶•ë¹„ 90% ì ˆê°(3,000ë§Œì›), ìƒì‚°ì„± 25% í–¥ìƒ, ë¶ˆëŸ‰ë¥  40% ê°ì†Œ, íˆ¬ì íšŒìˆ˜ ê¸°ê°„ 1.5ë…„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ì‚°ì—…ë¶€ ìŠ¤ë§ˆíŠ¸ì œì¡°í˜ì‹ ì¶”ì§„ë‹¨ í˜‘ë ¥, 5ë…„ê°„ ì¤‘ì†Œê¸°ì—… 1,000ê³³ ë³´ê¸‰ ëª©í‘œì…ë‹ˆë‹¤.

ì´ ì†Œìš” ì˜ˆì‚°: 15ì–µì›`
        };

        // ì„¤ì • ì €ì¥
        function saveConfig() {
            const urlInput = document.getElementById('backendUrl').value.trim();
            const keyInput = document.getElementById('apiKeyInput').value.trim();
            const statusEl = document.getElementById('configStatus');
            
            if (!urlInput) {
                statusEl.innerHTML = '<span style="color: red;">âŒ ë°±ì—”ë“œ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”!</span>';
                statusEl.style.background = '#ffe0e0';
                return;
            }
            
            if (!keyInput) {
                statusEl.innerHTML = '<span style="color: red;">âŒ API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!</span>';
                statusEl.style.background = '#ffe0e0';
                return;
            }
            
            if (!keyInput.startsWith('sk-ant-')) {
                statusEl.innerHTML = '<span style="color: red;">âŒ API í‚¤ëŠ” "sk-ant-"ë¡œ ì‹œì‘í•´ì•¼ í•©ë‹ˆë‹¤!</span>';
                statusEl.style.background = '#ffe0e0';
                return;
            }
            
            backendUrl = urlInput;
            apiKey = keyInput;
            
            localStorage.setItem('n2b_backend_url', urlInput);
            localStorage.setItem('n2b_api_key', keyInput);
            
            statusEl.innerHTML = '<span style="color: green;">âœ… ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!</span>';
            statusEl.style.background = '#d4edda';
            
            checkAnalyzeButton();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
        window.addEventListener('DOMContentLoaded', () => {
            const savedUrl = localStorage.getItem('n2b_backend_url');
            const savedKey = localStorage.getItem('n2b_api_key');
            
            if (savedUrl) {
                document.getElementById('backendUrl').value = savedUrl;
                backendUrl = savedUrl;
            }
            
            if (savedKey) {
                document.getElementById('apiKeyInput').value = savedKey;
                apiKey = savedKey;
            }
            
            if (savedUrl && savedKey) {
                const statusEl = document.getElementById('configStatus');
                statusEl.innerHTML = '<span style="color: green;">âœ… ì´ì „ ì„¤ì •ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤</span>';
                statusEl.style.background = '#d4edda';
                checkAnalyzeButton();
            }
        });

        // íƒ­ ì „í™˜
        function switchTab(tabName) {
            inputMode = tabName;
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            if (tabName !== 'sample') {
                selectedSample = null;
                document.querySelectorAll('.sample-card').forEach(card => {
                    card.classList.remove('selected');
                });
            }
            if (tabName !== 'upload') {
                uploadedFile = null;
                document.getElementById('fileName').textContent = '';
            }
            
            checkAnalyzeButton();
        }

        // ìƒ˜í”Œ ì„ íƒ
        function selectSample(sampleId) {
            document.querySelectorAll('.sample-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            document.querySelector(`[data-sample="${sampleId}"]`).classList.add('selected');
            selectedSample = sampleId;
            
            checkAnalyzeButton();
        }

        // íŒŒì¼ ì—…ë¡œë“œ
        async function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            uploadedFile = await readFile(file);
            document.getElementById('fileName').textContent = `ğŸ“„ ${file.name}`;
            
            checkAnalyzeButton();
        }

        function readFile(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = (e) => resolve(e.target.result);
                reader.onerror = reject;
                reader.readAsText(file);
            });
        }

        // ë²„íŠ¼ í™œì„±í™” ì²´í¬
        function checkAnalyzeButton() {
            const analyzeBtn = document.getElementById('analyzeBtn');
            let canAnalyze = false;
            
            if (backendUrl && apiKey && apiKey.startsWith('sk-ant-')) {
                if (inputMode === 'sample' && selectedSample) {
                    canAnalyze = true;
                } else if (inputMode === 'upload' && uploadedFile) {
                    canAnalyze = true;
                } else if (inputMode === 'form') {
                    const projectName = document.getElementById('projectName').value.trim();
                    const problemN = document.getElementById('problemN').value.trim();
                    const solutionB = document.getElementById('solutionB').value.trim();
                    const evidenceC = document.getElementById('evidenceC').value.trim();
                    
                    if (projectName && problemN && solutionB && evidenceC) {
                        canAnalyze = true;
                    }
                }
            }
            
            analyzeBtn.disabled = !canAnalyze;
        }

        // í¼ ì…ë ¥ ê°ì§€
        ['projectName', 'problemN', 'solutionB', 'evidenceC'].forEach(id => {
            document.getElementById(id).addEventListener('input', checkAnalyzeButton);
        });

        // ë¶„ì„ ì‹œì‘
        async function startAnalysis() {
            // ì…ë ¥ ë°ì´í„° ìˆ˜ì§‘
            let proposalText = '';
            
            if (inputMode === 'sample') {
                proposalText = sampleProposals[selectedSample];
            } else if (inputMode === 'upload') {
                proposalText = uploadedFile;
            } else if (inputMode === 'form') {
                const projectName = document.getElementById('projectName').value.trim();
                const problemN = document.getElementById('problemN').value.trim();
                const solutionB = document.getElementById('solutionB').value.trim();
                const evidenceC = document.getElementById('evidenceC').value.trim();
                
                proposalText = `ì‚¬ì—…ëª…: ${projectName}\n\n1. í˜„ì¬ ë¬¸ì œì  (N - NOT)\n${problemN}\n\n2. ì œì•ˆ ì†”ë£¨ì…˜ (B - BUT)\n${solutionB}\n\n3. ê·¼ê±° ë° ê¸°ëŒ€íš¨ê³¼ (C - BECAUSE)\n${evidenceC}`;
            }
            
            // UI ì—…ë°ì´íŠ¸
            document.getElementById('results').classList.remove('active');
            document.getElementById('loading').classList.add('active');
            
            try {
                // 1ë‹¨ê³„: N2B ë¶„ì„
                const n2bResult = await callBackend('analyze', {
                    apiKey: apiKey,
                    proposalText: proposalText
                });
                
                if (n2bResult.error) {
                    throw new Error(n2bResult.error);
                }
                
                // ê²°ê³¼ í‘œì‹œ
                document.getElementById('resultN').textContent = n2bResult.N;
                document.getElementById('resultB').textContent = n2bResult.B;
                document.getElementById('resultC').textContent = n2bResult.C;
                
                // 2ë‹¨ê³„: ì •ì±… ë§¤ì¹­
                const matchResult = await callBackend('match', {
                    apiKey: apiKey,
                    n2bAnalysis: n2bResult
                });
                
                if (matchResult.error) {
                    throw new Error(matchResult.error);
                }
                
                // ì •ì±… ê²°ê³¼ í‘œì‹œ
                displayProgramMatches(matchResult.matches);
                
                // ê²°ê³¼ í‘œì‹œ
                document.getElementById('loading').classList.remove('active');
                document.getElementById('results').classList.add('active');
                document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
                
            } catch (error) {
                document.getElementById('loading').classList.remove('active');
                alert('âŒ ì˜¤ë¥˜ ë°œìƒ\n' + error.message + '\n\nì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
            }
        }

        // ë°±ì—”ë“œ í˜¸ì¶œ
        async function callBackend(action, data) {
            const response = await fetch(backendUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    action: action,
                    ...data
                })
            });
            
            if (!response.ok) {
                throw new Error('ë°±ì—”ë“œ í˜¸ì¶œ ì‹¤íŒ¨: ' + response.status);
            }
            
            return await response.json();
        }

        // ì •ì±… ë§¤ì¹­ ê²°ê³¼ í‘œì‹œ
        function displayProgramMatches(matches) {
            const container = document.getElementById('programResults');
            container.innerHTML = '';
            
            matches.forEach((match, index) => {
                const program = match.program;
                const card = document.createElement('div');
                card.className = 'program-card';
                card.innerHTML = `
                    <div class="program-header">
                        <div class="program-title">${index + 1}ìœ„: ${program.name}</div>
                        <div class="match-score">ë§¤ì¹­ë„ ${match.score}/10</div>
                    </div>
                    <div class="program-meta">
                        <span class="meta-tag">ğŸ¢ ${program.agency}</span>
                        <span class="meta-tag">ğŸ¯ ${program.target}</span>
                        <span class="meta-tag">ğŸ“… ${program.period}</span>
                        <span class="meta-tag">ğŸ’° ${program.support_amount}</span>
                    </div>
                    <div class="program-reason">
                        <strong>ì¶”ì²œ ì´ìœ :</strong><br>
                        ${match.reason}
                    </div>
                `;
                container.appendChild(card);
            });
        }
    </script>
</body>
</html>
